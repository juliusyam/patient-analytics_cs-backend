# Patient Analytics - C# Backend

## What is [.NET](https://dotnet.microsoft.com/en-us/)?
.NET is the free, open-source, cross-platform framework for building modern apps and powerful cloud services.

## How to build full stack web app with .NET?
### With [ASP.NET Core](https://dotnet.microsoft.com/en-us/apps/aspnet).
#### Free. Cross-platform. Open source. 
A framework for building web apps and services with .NET and C#.

## Documentation
- [ASP.NET](https://learn.microsoft.com/en-us/aspnet/core/?view=aspnetcore-8.0&WT.mc_id=dotnet-35129-website)
- [Building web APIs with ASP.NET](https://learn.microsoft.com/en-us/aspnet/core/web-api/?view=aspnetcore-8.0&WT.mc_id=dotnet-35129-website)
- [Model-View-Controller (MVC) architectural pattern](https://learn.microsoft.com/en-us/aspnet/core/mvc/overview?view=aspnetcore-8.0&WT.mc_id=dotnet-35129-website)
- [Blazor](https://learn.microsoft.com/en-us/aspnet/core/blazor/?view=aspnetcore-8.0&WT.mc_id=dotnet-35129-website)
- [SignalR](https://learn.microsoft.com/en-us/aspnet/core/signalr/introduction?view=aspnetcore-8.0&WT.mc_id=dotnet-35129-website)

## How to run this project with Docker?

### Step 1: Download Docker Desktop
https://www.docker.com/products/docker-desktop/

This project is compiled on Docker version 25.0.3.

### Step 2: Run Docker Daemon
Docker Daemon should automatically run on open Docker Desktop, once the Docker Engine has started

### Step 3: Create the `patient-analytics-c-backend` Docker Container
`docker-compose build`

### Step 4: Run the `patient-analytics-c-backend` Docker Container
`docker-compose up`

### Step 5: Make Note of the Auto-generated SuperAdmin account
When running the application for the first time, the following command line will be printed on the terminal.

`Initial Super Admin account created with username: superadmin and password: <auto-generated-password>`

Make a note of the username and password as an initial account with SuperAdmin authorisation is required to interact with the application.

## How to run this project locally?

### Step 1: Install .NET 8 SDK
https://dotnet.microsoft.com/en-us/download/dotnet/8.0

This project is developed on .NET version 8.0.204.

[How to check if .NET is already installed?](https://learn.microsoft.com/en-us/dotnet/core/install/how-to-detect-installed-versions?pivots=os-windows)

Check the current version of .NET runtime with the following command on the project's root directory.

`dotnet --version`

### Step 2: Install Dependencies
Install dependencies with the following command on the project's root directory.

`dotnet restore`

### Step 3: Install Entity Framework Core Tools to .NET Core CLI
Install Entity Framework Core tools globally to enable the .NET Core CLI to perform design-time development tasks.

`dotnet tool install --global dotnet-ef`

Verify installation with the following command.

`dotnet ef`

### Step 4: Setup Postgres Database Connection
For this example we will be a generating a Postgres database via Docker.

1. Install [Docker Desktop](https://www.docker.com/products/docker-desktop/)
2. Retrieve the [Postgres Docker Image](https://hub.docker.com/_/postgres) and start a postgres instance

> To establish connection with credentials as found on appsettings.json, run the following command: 
> `docker run --name patientanalytics-postgres -p 5432:5432 -e POSTGRES_PASSWORD=mysecretpassword -d postgres`

3. Establish connection with database via your preferred IDE

### Step 5: Migrate the Database
Run the following command within the `PatientAnalytics` directory of the project to execute database migration.

`dotnet ef database update`

### Step 6: Start the Application
Run the following command within the `PatientAnalytics` directory of the project to start the application.

`dotnet run --project PatientAnalytics.csproj`

### Step 7: Make Note of the Auto-generated SuperAdmin account
When running the application for the first time, the following command line will be printed on the terminal.

`Initial Super Admin account created with username: superadmin and password: <auto-generated-password>`

Make a note of the username and password as an initial account with SuperAdmin authorisation is required to interact with the application.

## How to run interact with the application?

### Step 1: Interact with the Swagger Documentation
Direct to the following URL to view and interact with the Swagger Documentation for Web APIs. 
Swagger Documentation is automatically generated on build the application, and initially on run the project locally.

http://localhost:8080/swagger

### Step 2: Interact with the Blazor App
Direct to the following URL to view and interact with the frontend Blazor Web App.
Web App is automatically compiled on build the application, and initially on run the project locally.

http://localhost:8080

### Step 3: Login with the Auto-generated SuperAdmin via the Blazor App
Use the auto-generated login credentials provided to gain access to the SuperAdmin portal.
- Login to the SuperAdmin portal allows the creation and management of SuperAdmins, Admins and Doctors.
- Login to the Admin portal allows the creation and management of Admins and Doctors.
- Login to the Doctor portal allows the creation and management of Patients, and inputs of patient's metrics to generate reports.

### Step 4: Run Unit Tests
Run the following command within the `PatientAnalytics.Tests` directory of the project to run the unit tests.

`dotnet test`